#! /usr/bin/env bash

# set up local gitconfig (author name & email) @
# $DOTFILES/git/gitconfig.local.symlink if it does not exist

# check that DOTFILES variable is defined
source "$DOTFILES/setup/lib/check_dotfiles_variable.sh"

source "$DOTFILES/setup/lib/prompts.sh"

if ! [ -f "$DOTFILES/git/gitconfig.local.symlink" ]; then
  info 'setting up local gitconfig'

  user ' - What is your github author name?'
  # `-e` uses `readline`
  read -e git_authorname
  user ' - What is your github author email?'
  read -e git_authoremail

  # `-e <script>` applies given script to input
  sed -e "s/AUTHORNAME/$git_authorname/g" \
      -e "s/AUTHOREMAIL/$git_authoremail/g" \
        "$DOTFILES/git/gitconfig.local.symlink.example" \
      > "$DOTFILES/git/gitconfig.local.symlink"

  success "created local gitconfig @ $DOTFILES/git/gitconfig.local.symlink"
else
  msg="skipped local gitconfig creation - already exists @"
  msg+=" $DOTFILES/git/gitconfig.local.symlink"
  success "$msg"
fi
