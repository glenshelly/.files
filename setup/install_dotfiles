#! /usr/bin/env bash

set -e

# check that DOTFILES variable is defined
source './lib/check_dotfiles_variable.sh'

# run in separate subshells

# install Homebrew and packages, casks & mas apps in `$DOTFILES/Brewfile`
"$DOTFILES/setup/bin/install_brew"

# generate `gitconfig.local` @ `$DOTFILES/git/`
"$DOTFILES/setup/bin/setup_git_config"

# install various pieces too small for their own files
# see the file in question for each piece
"$DOTFILES/setup/bin/install_bits_and_pieces"

# run last for other pieces to be installed
# must be after `setup_git_config` to symlink generated file, and after
# `install_bits_and_pieces` to install submodules first
"$DOTFILES/setup/bin/symlink"
